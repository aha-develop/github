query GetPullRequest(
  $name: String!
  $owner: String!
  $number: Int!
  $includeStatus: Boolean = false
  $includeReviews: Boolean = false
  $includeLabels: Boolean = false
) {
  repository(name: $name, owner: $owner) {
    pullRequest(number: $number) {
      __typename
      ...PrForLink
      ...PrStatuses @include(if: $includeStatus)
      ...PrForReviewDecision @include(if: $includeReviews)
      ...PrLabels @include(if: $includeLabels)
    }
  }
}

fragment PrForLink on PullRequest {
  id
  number
  title
  url
  state
  merged
  repository {
    url
  }
  headRef {
    name
  }
}
fragment PrForReviewDecision on PullRequest {
  reviewDecision
  latestReviews(first: 5) {
    nodes {
      state
    }
  }
}
fragment PrLabels on PullRequest {
  labels(first: 5) {
    nodes {
      color
      name
    }
  }
}
